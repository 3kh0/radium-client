#include "HiveOnGround.h"
#include "../pch.h"

using namespace std;
HiveOnGround::HiveOnGround() : IModule(0, Category::EXPLOIT, "Prevents you from taking fall damage") {
	registerEnumSetting("Mode", &mode, 0);
	mode.addEntry("Packet", 0);
	//mode.addEntry("None", 1);
	//mode.addEntry("Hive", 2);
}

const char* HiveOnGround::getRawModuleName() {
	return "PlaySound";
}

const char* HiveOnGround::getModuleName() {
	if (mode.getSelectedValue() == 0) name = string("PlaySound ") + string(GRAY) + string("Packet");
	if (mode.getSelectedValue() == 1) name = string("PlaySound ") + string(GRAY) + string("None");
	if (mode.getSelectedValue() == 2) name = string("HiveOnGround ") + string(GRAY) + string("Hive");
	return name.c_str();
}

void HiveOnGround::onEnable() {
	auto player = g_Data.getLocalPlayer();
	if (player == nullptr) return;

	oldpos = *player->getPos();
}

void HiveOnGround::onTick(C_GameMode* gm) {
	auto player = g_Data.getLocalPlayer();
	if (player == nullptr) return;
	gm->player->causeFallDamage((float)1);
}

void HiveOnGround::onPlayerTick(C_Player* plr) {
	auto player = g_Data.getLocalPlayer();
	if (player == nullptr) return;
}

void HiveOnGround::onDisable() {
	auto player = g_Data.getLocalPlayer();
	if (player == nullptr) return;
}